var getInput=function(a){var b=document.getElementById(a).value;b=Math.floor(parseInt(b,10));b=b<0?0:b;b=a==="myheight"&&b>3e3?3e3:b;b=a==="mywidth"&&b>3e3?3e3:b;b=a==="rectheight"&&b>100?100:b;b=a==="rectwidth"&&b>100?100:b;b=a==="circlewidth"&&b>100?100:b;b=a==="rectheightdev"&&b>100?100:b;b=a==="rectwidthdev"&&b>100?100:b;b=a==="circledev"&&b>100?100:b;b=a==="rectstartx"&&b>100?100:b;b=a==="rectstarty"&&b>100?100:b;b=a==="circlestartx"&&b>100?100:b;b=a==="circlestarty"&&b>100?100:b;b=a==="locdeviation"&&b>100?100:b;b=a==="randomness"&&b>100?100:b;b=a==="minshapes"&&b>5e3?5e3:b;b=a==="maxshapes"&&b>5e3?5e3:b;b=a==="redchannel"&&b>255?255:b;b=a==="greenchannel"&&b>255?255:b;b=a==="bluechannel"&&b>255?255:b;b=a==="colordeviation"&&b>200?200:b;b=a==="bgcolordeviation"&&b>100?100:b;b=a==="rectopacity"&&b>100?100:b;b=a==="circleopacity"&&b>100?100:b;return b};getInput("myheight");var reset=function(){function W(a,b,c,d,e,f,g){this.width=a;this.height=b;this.x=c;this.y=d;this.color=e;this.blur=f;this.blurColor=g;var h=document.getElementById("tutorial");if(h.getContext){var i=h.getContext("2d");i.fillStyle=this.color;i.fillRect(this.x,this.y,this.width,this.height);i.shadowColor=this.blurColor;i.shadowOffsetX="0";i.shadowOffsetY="0";i.shadowBlur=this.blur}}function X(a,b,c,d,e,f){this.radius=a;this.x=b;this.y=c;this.color=d;this.blur=e;this.blurColor=f;var g=document.getElementById("tutorial");if(g.getContext){var h=g.getContext("2d");h.fillStyle=this.color;h.beginPath();h.arc(this.x,this.y,this.radius,0,Math.PI*2,true);h.fill();h.shadowColor=this.blurColor;h.shadowOffsetX="0";h.shadowOffsetY="0";h.shadowBlur=this.blur}}var a=function(a,b){return Math.floor(Math.random()*a+b)};var b=document.getElementById("testarea");var c=function(a){return a/100*-1+1};var d=function(a,b){return Math.round(a*(b/100))};var e=function(a,b){return a>=b?a:b};var f=getInput("mywidth");var g=getInput("myheight");var h=e(f,g);var i=getInput("georatio")/100;var j=a(d(h,getInput("rectheight")),0);var k=a(d(h,getInput("rectwidth")),0);var l=a(d(h,getInput("circlewidth")),0);var m=j*c(getInput("rectheightdev"));var n=k*c(getInput("rectwidthdev"));var o=l*c(getInput("circledev"));var p=f*(getInput("circlestartx")/100);var q=g*(getInput("circlestarty")/100);var r=f*(getInput("rectstartx")/100);var s=g*(getInput("rectstarty")/100);var t=f*(getInput("locdeviation")/100);var u=getInput("randomness")/100;var v=getInput("minshapes");var w=getInput("maxshapes")-getInput("minshapes");var x=0;var y=4;var z=getInput("bgcolordeviation")<1?1:getInput("bgcolordeviation");var A=getInput("colordeviation")<1?1:getInput("colordeviation");var B=getInput("redchannel")<1?1:getInput("redchannel");var C=getInput("greenchannel")<1?1:getInput("greenchannel");var D=getInput("bluechannel")<1?1:getInput("bluechannel");var E=a(getInput("rectopacity"),1)/100;var F=a(getInput("circleopacity"),1)/100;l=l/2;var G=B>5?B-5:B+5;var H=C>5?C-5:C+5;var I=D>5?D-5:D+5;var J=String(g);var K=String(f);document.getElementById("tutorial").height=J;document.getElementById("tutorial").width=K;document.getElementById("canvasImg").style.display="none";document.getElementById("reset").innerHTML="<canvas id='tutorial' onclick='reset() ' ></canvas>";document.getElementById("tutorial").height=J;document.getElementById("tutorial").width=K;var L=document.getElementById("tutorial");var M=L.toDataURL();document.getElementById("canvasImg").src=M;var N=a(A,G);var O=a(A,H);var P=a(A,I);var Q=function(b,c){var d=c-a(b,0)+a(b,0);if(d>254){d=255;d=d-a(b,1)}else if(d<1){d=0;d=d+a(b,1)}return d};var R=function(a,b){var c=a+255*(b/100);var d=c>255?c-255:c;return Math.floor(d)};var S="rgb("+Q(z,B)+","+Q(z,C)+" ,"+Q(z,D)+")";b.innerHTML=S;var T="rgba("+Q(R(N,25),A)+","+Q(R(O,25),A)+" ,"+Q(R(P,25),A)+","+E+")";var U="rgba("+Q(R(N,25),A)+","+Q(R(O,25),A)+" ,"+Q(R(P,25),A)+","+F+")";var V="rgba("+0+","+0+" ,"+0+","+0+")";var Y=a(f-r,r);var Z=a(g-s,s);var $=Y+a(t,0)-a(t,0);var _=Z+a(t,0)-a(t,0);var ab=function(b,c){var d=a(j,m);var e=a(k,n);if(e+b>f){b=e+b-f}if(d+c>g){c=d+c-g}var h=new W(e,d,b,c,T,a(30,1),S)};var bb=a(f-p,p);var cb=a(g-q,q);var db=bb+a(t,0)-a(t,0);var eb=cb+a(t,0)-a(t,0);var fb=function(b,c){var d=a(l,o);if(d+b>f){b=d+b-f}if(d+c>g){c=d+c-g}var e=new X(d,b,c,U,a(30,1),S)};var gb=new Array;var hb=0;var ib=1;var jb=a(w,v);var kb=new W(f,g,0,0,S);gb[hb]=kb;hb++;var lb=setInterval(function(){document.getElementById("tutorial").style.backgroundColor=S;var b=u+Math.random();if(b>=1){bb=a(f,0);cb=a(f,0)}b=u+Math.random();if(b>=1){Y=a(f,0);Z=a(g,0)}if(hb%4===0){db=bb+Math.round(a(t,0));eb=cb-Math.round(a(t,0));$=Y+Math.round(a(t,0));_=Z-Math.round(a(t,0))}else if(hb%4===1){db=bb+Math.round(a(t,0));eb=cb+Math.round(a(t,0));$=Y+Math.round(a(t,0));_=Z+Math.round(a(t,0))}else if(hb%4===2){db=bb-Math.round(a(t,0));eb=cb+Math.round(a(t,0));$=Y-Math.round(a(t,0));_=Z+Math.round(a(t,0))}else{db=bb-Math.round(a(t,0));eb=cb-Math.round(a(t,0));$=Y-Math.round(a(t,0));_=Z-Math.round(a(t,0))}var c=Math.random();if(c<=i){gb[P]=ab($,_)}else{gb[P]=fb(db,eb)}document.getElementById("maxCount").innerHTML="# of shapes: "+jb;document.getElementById("counter").innerHTML="         count: "+(hb+1);hb++;if(hb>=jb){var d=document.getElementById("tutorial");var e=d.toDataURL();document.getElementById("canvasImg").src=e;document.getElementById("canvasImg").style.display="block";clearInterval(lb)}},a(y,x))}